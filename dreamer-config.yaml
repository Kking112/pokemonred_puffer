# DreamerV3 specific configuration for Pokemon Red
# Standalone configuration (no Hydra inheritance)

wandb:
  entity: neocodes_dev-neocodes
  project: Pokemon_Red_RL
  group: dreamerv3

# DreamerV3 specific settings
dreamer:
  algorithm: 'dreamerv3'
  
  # Replay buffer - adjust based on available RAM
  replay_capacity: 2_000_000
  sequence_length: 50
  batch_size: 16
  prefill_steps: 5000
  
  # Environment settings
  num_envs: 8  # Use 8 parallel environments for better data diversity
  collect_interval: 200  # Collect more steps between training
  
  # Text encoder
  text_embed_dim: 128
  text_num_heads: 4
  text_num_layers: 2
  text_output_dim: 128
  
  # World model architecture - optimized for RTX 5090
  deter_dim: 1024  # Larger deterministic state for complex game
  stoch_dim: 32
  stoch_classes: 32
  hidden_dim: 512
  encoder_dim: 512
  
  # World model training
  world_model_lr: 1e-4
  world_model_train_steps: 2  # More training steps per iteration
  kl_weight: 1.0
  kl_balance: 0.8
  free_nats: 1.0
  
  # Actor-critic
  actor_hidden_dim: 512
  actor_num_layers: 2
  critic_hidden_dim: 512
  critic_num_layers: 2
  num_critics: 3  # Larger ensemble for stability
  
  # Actor-critic training
  actor_lr: 3e-5
  critic_lr: 3e-5
  actor_critic_train_steps: 2
  imagination_horizon: 15
  discount: 0.997
  lambda_: 0.95
  entropy_coef: 3e-4
  
  # Training
  grad_clip: 100.0
  use_amp: True
  num_iterations: 100_000
  
  # Logging
  log_interval: 10
  checkpoint_interval: 500
  checkpoint_dir: 'checkpoints/dreamerv3'

env:
  gb_path: red.gb
  headless: True
  video_dir: video
  state_dir: pyboy_states
  init_state: Bulbasaur
  action_freq: 24
  max_steps: 19816
  save_video: False
  fast_video: False
  n_record: 10
  perfect_ivs: False
  reduce_res: True
  two_bit: True
  log_frequency: 2000
  auto_flash: True
  disable_wild_encounters: False
  disable_ai_actions: False
  auto_teach_cut: False
  auto_use_cut: False
  auto_use_strength: True
  auto_use_surf: True
  auto_teach_surf: True
  auto_teach_strength: True
  auto_solve_strength_puzzles: True
  auto_remove_all_nonuseful_items: True
  auto_pokeflute: True
  auto_next_elevator_floor: False
  skip_safari_zone: False
  infinite_safari_steps: False
  insert_saffron_guard_drinks: False
  infinite_money: True
  infinite_health: False
  use_global_map: False
  save_state: True
  animate_scripts: False
  exploration_inc: 1.0
  exploration_max: 1.0
  max_steps_scaling: 0
  map_id_scalefactor: 9.539340019226074
  required_tolerance: null